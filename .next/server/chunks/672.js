exports.id=672,exports.ids=[672],exports.modules={22857:(e,t,i)=>{Promise.resolve().then(i.bind(i,33104))},61029:(e,t,i)=>{Promise.resolve().then(i.t.bind(i,12994,23)),Promise.resolve().then(i.t.bind(i,96114,23)),Promise.resolve().then(i.t.bind(i,9727,23)),Promise.resolve().then(i.t.bind(i,79671,23)),Promise.resolve().then(i.t.bind(i,41868,23)),Promise.resolve().then(i.t.bind(i,84759,23))},33104:(e,t,i)=>{"use strict";i.d(t,{Header:()=>l});var n=i(10326),a=i(90434),s=i(35047),r=i(17577);let o=[{href:"/",label:"Home"},{href:"/stakeholders",label:"Stakeholders"},{href:"/tetra",label:"Tetra"},{href:"/design",label:"Design"},{href:"/opt",label:"Optimization"},{href:"/ethics",label:"Ethics"},{href:"/rnd",label:"R&D"},{href:"/appendix",label:"Appendix"}];function l(){let e=(0,s.usePathname)(),t=(0,r.useMemo)(()=>e,[e]);return n.jsx("header",{className:"sticky top-0 z-50 bg-white/90 backdrop-blur border-b border-slate-200",children:(0,n.jsxs)("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-6 py-4",children:[n.jsx(a.default,{href:"/",className:"text-lg font-semibold text-lagoon-700",children:"MOSE Open Design Lab"}),n.jsx("nav",{className:"hidden gap-4 text-sm font-medium md:flex",children:o.map(e=>{let i=t===e.href;return n.jsx(a.default,{href:e.href,className:`rounded-full px-4 py-2 transition-colors ${i?"bg-lagoon-100 text-lagoon-800":"text-slate-600 hover:bg-lagoon-50"}`,children:e.label},e.href)})})]})})}},9417:(e,t,i)=>{"use strict";i.d(t,{defaultConfig:()=>n});let n={constants:{TOTAL_LENGTH:1600,MIN_CLOSING_TIME:.001},bounds:{x1:{min:0,max:1600,step:10,unit:"m"},x2:{min:1,max:10,step:.1,unit:"m"},x3:{min:.5,max:5,step:.1,unit:"h"}},OBJECTIVE_KEYS:["initial_cost","maintenance_cost","sight","accessibility","water_quality","overtopping_risk"],STAKEHOLDER_DATA:[{name:"Municipality",influence:.5,weights:{initial_cost:.4,maintenance_cost:.25,sight:.05,accessibility:.1,water_quality:.1,overtopping_risk:.1}},{name:"Residents",influence:.25,weights:{initial_cost:.1,maintenance_cost:.1,sight:.25,accessibility:.2,water_quality:.25,overtopping_risk:.1}},{name:"Environmental Agency",influence:.1,weights:{initial_cost:.05,maintenance_cost:.05,sight:.1,accessibility:.1,water_quality:.55,overtopping_risk:.15}},{name:"Shipping Companies",influence:.15,weights:{initial_cost:.1,maintenance_cost:.1,sight:.3,accessibility:.2,water_quality:.2,overtopping_risk:.1}}],knots:{initial_cost:{x:[5e8,1e9,2e9,35e8,8e9],y:[100,95,90,30,0]},maintenance_cost:{x:[5e8,6e9,14e9],y:[100,40,0]},sight:{x:[0,5,10],y:[0,50,100]},accessibility:{x:[0,5,10],y:[0,50,100]},water_quality:{x:[0,5,10],y:[0,50,100]},overtopping_risk:{x:[0,.15,.3,.45,.6],y:[100,85,60,25,0]}},options:{popSize:600,iterations:500,crossover:.8,stallLimit:10,encoding:"real",bits:10},paradigms:["minmax","tetra"]}},78748:(e,t,i)=>{"use strict";i.d(t,{M:()=>x});var n=i(60114),a=i(9417);let s={seaLevelRise:0,storminess:1,maintenanceBudget:1},r=Object.fromEntries(a.defaultConfig.OBJECTIVE_KEYS.map(e=>{let t=a.defaultConfig.knots[e].x;return[e,[t[0],t[t.length-1]]]}));function o(e,t){let[i,n]=r[e];return Math.min(Math.max(t,i),n)}function l(e,t=s){let{constants:i}=a.defaultConfig,{x1:n,x2:r,x3:l}=e,h=Number(i.TOTAL_LENGTH),c=Math.max(l,i.MIN_CLOSING_TIME),m=Math.max(0,Math.min(n,h)),d=Math.max(0,h-m),g=0===h?0:Math.max(0,Math.min(1,m/h));return{initial_cost:o("initial_cost",m*(52e4+48e3*Math.pow(r,1.5)+22e4/c)+d*(18e3+5500*Math.pow(r,1.1))),maintenance_cost:o("maintenance_cost",(125e4+48e4*r+15e5/Math.pow(c,1.2))*m+(85e3+22e3*r)*d),sight:o("sight",10*g+10*(1-g)/Math.max(r,1e-6)),accessibility:o("accessibility",10*g-10/7*l),water_quality:o("water_quality",10*g-10/24*l),overtopping_risk:o("overtopping_risk",.65*Math.exp(-.35*(r-1)))}}function h(e=a.defaultConfig.knots){return Object.fromEntries(Object.entries(e).map(([e,{x:t,y:i}])=>[e,function(e,t){if(e.length!==t.length)throw Error("x and y knot arrays must be the same length");if(e.length<2)throw Error("At least two knots are required");let i=e.length;for(let t=1;t<i;t+=1)if(e[t]<=e[t-1])throw Error("Knots must be strictly increasing");let n=Array(i-1).fill(0),a=Array(i-1).fill(0);for(let s=0;s<i-1;s+=1)n[s]=e[s+1]-e[s],a[s]=(t[s+1]-t[s])/n[s];let s=Array(i).fill(0);if(2===i)s[0]=a[0],s[1]=a[0];else{let e=n[1]??n[0],t=a[1]??a[0];s[0]=((2*n[0]+e)*a[0]-n[0]*t)/(n[0]+e),Math.sign(s[0])!==Math.sign(a[0])?s[0]=0:Math.abs(s[0])>3*Math.abs(a[0])&&(s[0]=3*a[0]);let r=n[i-3]??n[i-2],o=a[i-3]??a[i-2];s[i-1]=((2*n[i-2]+r)*a[i-2]-n[i-2]*o)/(n[i-2]+r),Math.sign(s[i-1])!==Math.sign(a[i-2])?s[i-1]=0:Math.abs(s[i-1])>3*Math.abs(a[i-2])&&(s[i-1]=3*a[i-2])}for(let e=1;e<i-1;e+=1)if(0===a[e-1]||0===a[e]||Math.sign(a[e-1])!==Math.sign(a[e]))s[e]=0;else{let t=2*n[e]+n[e-1],i=n[e]+2*n[e-1];s[e]=(t+i)/(t/a[e-1]+i/a[e])}return a=>{let r=Math.min(Math.max(a,e[0]),e[i-1]);if(r===e[0])return t[0];if(r===e[i-1])return t[i-1];let o=0,l=i-1;for(;o<=l;){let t=Math.floor((o+l)/2);if(e[t]<=r&&r<=e[t+1]){o=t;break}e[t]<r?o=t+1:l=t-1}let h=Math.min(o,i-2),c=(r-e[h])/n[h],m=(1+2*c)*(1-c)*(1-c)*t[h]+c*(1-c)*(1-c)*n[h]*s[h]+c*c*(3-2*c)*t[h+1]+c*c*(c-1)*n[h]*s[h+1],d=Math.min(t[h],t[h+1]);return Math.max(Math.min(m,Math.max(t[h],t[h+1])),d)}}(t,i)]))}function c(e){let t=e.map(e=>e.name),i=e.reduce((e,t)=>e+t.influence,0);return{names:t,weights:e.map(e=>0===i?0:e.influence/i),objectiveWeights:e.map(e=>{let t=a.defaultConfig.OBJECTIVE_KEYS.map(t=>e.weights[t]??0),i=t.reduce((e,t)=>e+t,0);return t.map(e=>0===i?0:e/i)})}}let m=h(),d=c(a.defaultConfig.STAKEHOLDER_DATA),g={x1:(a.defaultConfig.bounds.x1.min+a.defaultConfig.bounds.x1.max)/2,x2:(a.defaultConfig.bounds.x2.min+a.defaultConfig.bounds.x2.max)/2,x3:(a.defaultConfig.bounds.x3.min+a.defaultConfig.bounds.x3.max)/2},u=l(g,s),f=Object.fromEntries(Object.entries(u).map(([e,t])=>[e,Math.round(m[e](t))]));function p(e,t){let i=e.reduce((e,t)=>e+t,0)||1;return{weights:e.map(e=>e/i),objectives:t.map(e=>{let t=e.reduce((e,t)=>e+t,0)||1;return e.map(e=>e/t)})}}let x=(0,n.Ue)((e,t)=>({config:a.defaultConfig,design:g,scenario:s,prefFns:m,metrics:u,preferences:f,aggregator:"minmax",stakeholderNames:d.names,stakeholderWeights:d.weights,stakeholderObjectiveWeights:d.objectiveWeights,stakeholderRawInfluence:a.defaultConfig.STAKEHOLDER_DATA.map(e=>e.influence),stakeholderRawObjectiveWeights:a.defaultConfig.STAKEHOLDER_DATA.map(e=>a.defaultConfig.OBJECTIVE_KEYS.map(t=>e.weights[t]??0)),history:{minmax:[],tetra:[]},gaProgress:null,pinned:[],setDesign:t=>{e(e=>{let i={...e.design,...t},n=l(i,e.scenario),a=Object.fromEntries(Object.entries(n).map(([t,i])=>[t,Math.round(e.prefFns[t](i))]));return{design:i,metrics:n,preferences:a}})},setScenario:t=>{e(e=>{let i={...e.scenario,...t},n=l(e.design,i),a=Object.fromEntries(Object.entries(n).map(([t,i])=>[t,Math.round(e.prefFns[t](i))]));return{scenario:i,metrics:n,preferences:a}})},setAggregator:t=>e({aggregator:t}),recalc:()=>{e(e=>{let t=l(e.design,e.scenario),i=Object.fromEntries(Object.entries(t).map(([t,i])=>[t,Math.round(e.prefFns[t](i))]));return{metrics:t,preferences:i}})},aggregate:e=>{let i=t();return function(e,t,i,n){let s=a.defaultConfig.OBJECTIVE_KEYS.map(t=>e[t]),r=i.map(e=>e.reduce((e,t,i)=>e+t*s[i],0));return{overall:"minmax"===n?Math.min(...r):100*Math.pow(r.map((e,i)=>t[i]*Math.pow(e/100,3)).reduce((e,t)=>e+t,0),1/3),stakeholder:r}}(i.preferences,i.stakeholderWeights,i.stakeholderObjectiveWeights,e??i.aggregator)},runGA:e=>{},pinDesign:t=>e(e=>({pinned:e.pinned.find(e=>e.iteration===t.iteration&&e.paradigm===t.paradigm)?e.pinned:[...e.pinned,t]})),unpinDesign:t=>e(e=>({pinned:e.pinned.filter((e,i)=>i!==t)})),importConfig:t=>{let i=h(t.knots),n=c(t.STAKEHOLDER_DATA),a={x1:(t.bounds.x1.min+t.bounds.x1.max)/2,x2:(t.bounds.x2.min+t.bounds.x2.max)/2,x3:(t.bounds.x3.min+t.bounds.x3.max)/2},r=l(a,s),o=Object.fromEntries(Object.entries(r).map(([e,t])=>[e,Math.round(i[e](t))]));e({config:t,prefFns:i,stakeholderNames:n.names,stakeholderWeights:n.weights,stakeholderObjectiveWeights:n.objectiveWeights,stakeholderRawInfluence:t.STAKEHOLDER_DATA.map(e=>e.influence),stakeholderRawObjectiveWeights:t.STAKEHOLDER_DATA.map(e=>t.OBJECTIVE_KEYS.map(t=>e.weights[t]??0)),design:a,metrics:r,preferences:o,history:{minmax:[],tetra:[]}})},setStakeholderInfluences:t=>{e(e=>{if(!Array.isArray(t)||t.length!==e.stakeholderRawInfluence.length)return{};let i=t.map(e=>Math.max(1e-4,e)),n=p(i,e.stakeholderRawObjectiveWeights);return{stakeholderRawInfluence:i,stakeholderWeights:n.weights,stakeholderObjectiveWeights:n.objectives}})},updateStakeholderInfluence:(t,i)=>{e(e=>{let n=e.stakeholderRawInfluence.map((e,n)=>n===t?Math.max(1e-4,i):e),a=p(n,e.stakeholderRawObjectiveWeights);return{stakeholderRawInfluence:n,stakeholderWeights:a.weights,stakeholderObjectiveWeights:a.objectives}})},updateStakeholderObjectiveWeight:(t,i,n)=>{e(e=>{let a=e.stakeholderRawObjectiveWeights.map((e,a)=>a!==t?e:e.map((e,t)=>t===i?n:e)),s=p(e.stakeholderRawInfluence,a);return{stakeholderRawObjectiveWeights:a,stakeholderWeights:s.weights,stakeholderObjectiveWeights:s.objectives}})}}))},98210:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l,metadata:()=>o});var n=i(19510),a=i(85384),s=i.n(a);i(67272),i(88147);let r=(0,i(68570).createProxy)(String.raw`/Users/jasperderuiter/Documents/GitHub/Mose2/components/layout/Header.tsx#Header`),o={title:"MOSE Interactive ODL",description:"A glass-box, preference-based engineering design studio exploring the MOSE flood barrier in Venice."};function l({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{className:`${s().className} bg-lagoon-50 min-h-screen`,children:(0,n.jsxs)("div",{className:"min-h-screen flex flex-col",children:[n.jsx(r,{}),n.jsx("main",{className:"flex-1",children:e}),n.jsx("footer",{className:"bg-white border-t border-slate-100 py-10",children:n.jsx("div",{className:"mx-auto max-w-6xl px-6 text-sm text-slate-500",children:n.jsx("p",{children:"Built for the MOSE Open Design Lab â€” explore, compare, and export insight-rich design narratives."})})})]})})})}},67272:()=>{}};