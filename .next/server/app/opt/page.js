(()=>{var e={};e.id=371,e.ids=[371],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},42946:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(99893),s(98210),s(35866);var i=s(23191),a=s(88716),n=s(37922),l=s.n(n),r=s(95231),o={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>r[e]);s.d(t,o);let c=["",{children:["opt",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,99893)),"/Users/jasperderuiter/Documents/GitHub/Mose2/app/opt/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,98210)),"/Users/jasperderuiter/Documents/GitHub/Mose2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/jasperderuiter/Documents/GitHub/Mose2/app/opt/page.tsx"],m="/opt/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/opt/page",pathname:"/opt",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},87136:(e,t,s)=>{Promise.resolve().then(s.bind(s,63109))},63109:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var i=s(10326),a=s(17577),n=s(30660),l=s(17809),r=s(62637),o=s(9997),c=s(44675),d=s(74390),m=s(42792),x=s(78748);let p=[{key:"balanced",label:"Balanced (course default)",values:[.5,.25,.1,.15],description:"Matches the stakeholder interviews used in the notebook: Municipality leads, Residents hold a quarter share, followed by Environmental Agency and Shipping."},{key:"civic-safety",label:"Civic safety priority",values:[.6,.25,.05,.1],description:"Municipality and Residents dominate the decision, pushing the GA toward designs that maximise flood safety and cost accountability."},{key:"environmental",label:"Environmental emphasis",values:[.35,.15,.35,.15],description:"Weights chosen to highlight lagoon ecology concerns while still acknowledging civic and navigation needs."},{key:"navigation",label:"Navigation emphasis",values:[.4,.15,.1,.35],description:"Gives the port and marine transport sector a leading voice, favouring shorter closures and more movable spans."}],h={initial_cost:{label:"Initial cost (EUR)",format:e=>e.toExponential(3)},maintenance_cost:{label:"Maintenance cost (EUR)",format:e=>e.toExponential(3)},sight:{label:"Sight score",format:e=>e.toFixed(2)},accessibility:{label:"Navigation accessibility",format:e=>e.toFixed(2)},water_quality:{label:"Water quality score",format:e=>e.toFixed(2)},overtopping_risk:{label:"Residual overtopping risk",format:e=>e.toFixed(3)}};function u(e,t,s){return t?(0,i.jsxs)("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-base font-semibold text-slate-800",children:e}),(0,i.jsxs)("ul",{className:"space-y-1 text-sm text-slate-700",children:[(0,i.jsxs)("li",{children:[i.jsx("span",{className:"font-medium",children:"x1:"})," ",t.design.x1.toFixed(2)," m movable gates"]}),(0,i.jsxs)("li",{children:[i.jsx("span",{className:"font-medium",children:"x2:"})," ",t.design.x2.toFixed(2)," m gate height"]}),(0,i.jsxs)("li",{children:[i.jsx("span",{className:"font-medium",children:"x3:"})," ",t.design.x3.toFixed(2)," h closure duration"]})]}),i.jsx("ul",{className:"space-y-1 text-xs text-slate-500",children:s.map(e=>{var s;return(0,i.jsxs)("li",{children:[(0,i.jsxs)("span",{className:"font-medium text-slate-700",children:[h[e].label,":"]})," ",h[e].format(t.metrics[e]),(0,i.jsxs)("span",{className:"ml-2 text-slate-400",children:["Preference ",(s=t.preferences[e],`${Math.round(s)} / 100`)]})]},e)})})]}):i.jsx("p",{className:"text-sm text-slate-600",children:"Run the optimisation to view this result."})}function g(){let{config:e,stakeholderNames:t,stakeholderWeights:s,stakeholderRawInfluence:g,prefFns:f,setStakeholderInfluences:y}=(0,x.M)(),b=e.OBJECTIVE_KEYS.slice(),v=(e,t)=>{let s={};return b.forEach(e=>{let i=f?.[e];s[e]=i?Math.round(i(t[e])):0}),{design:e,metrics:t,preferences:s}},j=(0,a.useMemo)(()=>({balanced:{minmax:v({x1:1598.44,x2:2.92,x3:2.11},{initial_cost:1381e6,maintenance_cost:9395e8,sight:9.99,accessibility:6.97,water_quality:9.11,overtopping_risk:.331}),tetra:v({x1:1598.44,x2:3.1,x3:1.63},{initial_cost:1466e6,maintenance_cost:1028e9,sight:9.99,accessibility:7.66,water_quality:9.31,overtopping_risk:.312})},"civic-safety":{minmax:v({x1:1598.44,x2:2.93,x3:2.12},{initial_cost:1383e6,maintenance_cost:9403e8,sight:9.99,accessibility:6.97,water_quality:9.11,overtopping_risk:.33}),tetra:v({x1:1598.44,x2:3.04,x3:1.62},{initial_cost:1455e6,maintenance_cost:1021e9,sight:9.99,accessibility:7.68,water_quality:9.31,overtopping_risk:.318})},environmental:{minmax:v({x1:1598.44,x2:2.93,x3:2.12},{initial_cost:1383e6,maintenance_cost:9403e8,sight:9.99,accessibility:6.97,water_quality:9.11,overtopping_risk:.33}),tetra:v({x1:1598.44,x2:3.24,x3:1.31},{initial_cost:1547e6,maintenance_cost:1119e9,sight:9.99,accessibility:8.11,water_quality:9.44,overtopping_risk:.297})},navigation:{minmax:v({x1:1598.44,x2:2.97,x3:2.12},{initial_cost:139e7,maintenance_cost:9451e8,sight:9.99,accessibility:6.97,water_quality:9.11,overtopping_risk:.326}),tetra:v({x1:1598.44,x2:3.24,x3:1.39},{initial_cost:1532e6,maintenance_cost:1099e9,sight:9.99,accessibility:8.01,water_quality:9.41,overtopping_risk:.297})}}),[f,b]),_=(0,a.useMemo)(()=>({Municipality:{minmax:v({x1:0,x2:9.99,x3:3.19},{initial_cost:1395e5,maintenance_cost:2682e7,sight:1,accessibility:0,water_quality:0,overtopping_risk:.028}),tetra:v({x1:0,x2:9.99,x3:1.12},{initial_cost:1395e5,maintenance_cost:2682e7,sight:1,accessibility:0,water_quality:0,overtopping_risk:.028})},Residents:{minmax:v({x1:1598.44,x2:4.79,x3:.57},{initial_cost:2252e6,maintenance_cost:1868e9,sight:9.99,accessibility:9.18,water_quality:9.75,overtopping_risk:.173}),tetra:v({x1:1598.44,x2:5.5,x3:.62},{initial_cost:2385e6,maintenance_cost:1881e9,sight:9.99,accessibility:9.1,water_quality:9.73,overtopping_risk:.135})},"Environmental Agency":{minmax:v({x1:1598.44,x2:5.84,x3:.5},{initial_cost:2618e6,maintenance_cost:2158e9,sight:9.99,accessibility:9.28,water_quality:9.78,overtopping_risk:.119}),tetra:v({x1:1598.44,x2:5.84,x3:.5},{initial_cost:2618e6,maintenance_cost:2158e9,sight:9.99,accessibility:9.28,water_quality:9.78,overtopping_risk:.119})},"Shipping Companies":{minmax:v({x1:1598.44,x2:4.79,x3:.57},{initial_cost:2252e6,maintenance_cost:1868e9,sight:9.99,accessibility:9.18,water_quality:9.75,overtopping_risk:.173}),tetra:v({x1:1598.44,x2:4.79,x3:.57},{initial_cost:2252e6,maintenance_cost:1868e9,sight:9.99,accessibility:9.18,water_quality:9.75,overtopping_risk:.173})}}),[f,b]),k=(0,a.useMemo)(()=>{let e=(e,t)=>e.length===t.length&&e.every((e,s)=>.001>Math.abs(e-t[s]));return p.find(t=>e(t.values,g))??p[0]},[g]),[w,N]=(0,a.useState)(k.key),[M,q]=(0,a.useState)(null),[S,P]=(0,a.useState)({}),E=p.find(e=>e.key===w)??p[0],T=j[E.key],A=T?.tetra??null,C=T?.minmax??null,R=(0,a.useMemo)(()=>A&&C?b.map(t=>{let s=e.knots[t].x,i=s[0],a=s[s.length-1],n=Array.from({length:121},(e,s)=>{let n=i+s/120*(a-i),l=f?.[t],r=l?l(n):0;return{metric:n,preference:r}}),l=e=>Math.min(Math.max(e,i),a);return{objective:t,samples:n,min:i,max:a,tetraPoint:{metric:l(A.metrics[t]),preference:A.preferences[t]},minmaxPoint:{metric:l(C.metrics[t]),preference:C.preferences[t]}}}):[],[e.knots,b,f,A,C]),z=e=>{let t=E.label;q(`${"tetra"===e?"Weighted (Tetra)":"Min–Max"} \xb7 ${t}`)},F=e=>{let t=_[e];t&&P(s=>({...s,[e]:t}))};return(0,i.jsxs)("div",{className:"mx-auto max-w-6xl px-6 py-12 space-y-12",children:[(0,i.jsxs)("header",{className:"space-y-4",children:[i.jsx("h1",{className:"text-4xl font-semibold text-slate-800",children:"Optimization Lab"}),(0,i.jsxs)("div",{className:"space-y-3 text-sm text-slate-600",children:[i.jsx("p",{children:"The project involves several stakeholders, including the Municipality, Residents, Environmental Agency, and Shipping Companies, each with their own priorities and objectives. For example, the Municipality places strong emphasis on cost efficiency and safety, while the Environmental Agency focuses more on water quality."}),i.jsx("p",{children:"Because each stakeholder values the design aspects differently, an individual optimization can be performed for each group to find the best combination of barrier length (L), height (H), and closure time (T) that aligns with their specific interests."}),i.jsx("p",{children:"Additionally, by assigning weighted importance values to all stakeholder preferences, a combined optimization can be created. The weighted importance is determined in the Tetra page of this site. This represents the most balanced design, one that offers the best possible compromise between economic feasibility, safety, environmental quality, and operational functionality for the MOSE barrier system."}),i.jsx("p",{children:"To identify the optimal configuration of the MOSE barrier, our model uses two complementary optimization approaches: the Tetra Solution and the Min–Max Solution."})]})]}),(0,i.jsxs)("section",{className:"card p-6 space-y-4",children:[i.jsx("h2",{className:"section-title",children:"Choose Weight Scenario"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Select one of the stakeholder influence profiles we analysed in the notebook. The values are normalised before optimisation runs."}),(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 md:items-start",children:[(0,i.jsxs)("label",{className:"space-y-2 text-sm text-slate-600",children:[i.jsx("span",{className:"block font-medium text-slate-700",children:"Weight profile"}),i.jsx("select",{value:w,onChange:e=>{let t=p.find(t=>t.key===e.target.value)??p[0];N(t.key),q(null),y(Array.from(t.values))},className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",children:p.map(e=>i.jsx("option",{value:e.key,children:e.label},e.key))}),i.jsx("span",{className:"block text-xs text-slate-500",children:p.find(e=>e.key===w)?.description??E.description})]}),(0,i.jsxs)("div",{className:"rounded-xl bg-slate-50 p-4",children:[i.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Normalised influence"}),i.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-600",children:t.map((e,t)=>(0,i.jsxs)("li",{className:"flex items-baseline justify-between gap-4",children:[i.jsx("span",{className:"font-medium text-slate-700",children:e}),(0,i.jsxs)("span",{children:[(100*s[t]).toFixed(1),"%"]})]},e))})]})]})]}),(0,i.jsxs)("section",{className:"card p-6 space-y-4",children:[i.jsx("h2",{className:"section-title",children:"Recorded Optimisation Runs"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Use the buttons to highlight the stored results for each paradigm. The underlying data are reproduced exactly from the notebook runs."}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-4",children:[i.jsx("button",{type:"button",onClick:()=>z("tetra"),className:"rounded-full bg-lagoon-600 px-5 py-2 text-sm font-semibold text-white",children:"Show weighted (Tetra) solution"}),i.jsx("button",{type:"button",onClick:()=>z("minmax"),className:"rounded-full border border-lagoon-600 px-5 py-2 text-sm font-semibold text-lagoon-700",children:"Show Min–Max solution"})]}),i.jsx("p",{className:"text-xs text-slate-500",children:M?`Viewing recorded ${M}.`:"Select a preset and choose a paradigm to view the stored results."})]}),(0,i.jsxs)("section",{className:"grid gap-6 md:grid-cols-2",children:[i.jsx("article",{className:"card p-6 space-y-3",children:u("Weighted (Tetra) solution",A,b)}),i.jsx("article",{className:"card p-6 space-y-3",children:u("Min–Max solution",C,b)})]}),(0,i.jsxs)("section",{className:"card p-6 space-y-6",children:[i.jsx("h2",{className:"section-title",children:"Preference Curves and Optimisation Solutions"}),i.jsx("p",{className:"text-sm text-slate-600",children:"The curves show how stakeholders score each performance aspect as the underlying metric changes. Markers highlight the latest weighted (Tetra) and Min–Max solutions so you can see where the optimisers land on each preference scale."}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:R.map(({objective:e,samples:t,tetraPoint:s,minmaxPoint:a,min:x,max:p})=>{let u=h[e].label;return(0,i.jsxs)("article",{className:"space-y-3",children:[i.jsx("h3",{className:"text-base font-semibold text-slate-700",children:u}),i.jsx("div",{className:"h-40 w-full",children:i.jsx(n.h,{children:(0,i.jsxs)(l.w,{data:t,margin:{left:12,right:12,top:12,bottom:12},children:[i.jsx(r.K,{dataKey:"metric",tick:{fill:"#475569",fontSize:11},type:"number",domain:[x,p],label:{value:"Metric value",position:"insideBottom",offset:-6,fill:"#475569",fontSize:10}}),i.jsx(o.B,{dataKey:"preference",domain:[0,100],tick:{fill:"#475569",fontSize:11},label:{value:"Preference (0-100)",angle:-90,position:"insideLeft",offset:8,fill:"#475569",fontSize:10}}),i.jsx(c.u,{formatter:e=>`${e.toFixed(1)} preference`,labelFormatter:t=>`${h[e].label}: ${Number(t).toLocaleString()}`}),i.jsx(d.x,{type:"monotone",dataKey:"preference",stroke:"#0f60db",strokeWidth:2,dot:!1}),i.jsx(m.q,{x:s.metric,y:s.preference,r:6,fill:"#0f766e",stroke:"white",label:{value:"Tetra",position:"top",fill:"#0f766e",fontSize:10}}),i.jsx(m.q,{x:a.metric,y:a.preference,r:6,fill:"#6366f1",stroke:"white",label:{value:"Min–Max",position:"bottom",fill:"#6366f1",fontSize:10}})]})})})]},e)})})]}),(0,i.jsxs)("section",{className:"card p-6 space-y-4",children:[i.jsx("h2",{className:"section-title",children:"Optimize for one stakeholder at a time"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Run the GA with a single stakeholder set to 100% influence. This mirrors a sensitivity sweep where the other groups momentarily step back."}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:t.map(e=>{let t=S[e]??null;return(0,i.jsxs)("article",{className:"rounded-2xl border border-slate-100 p-4 space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:e}),i.jsx("p",{className:"text-xs text-slate-500",children:"100% influence, others at 0%"})]}),i.jsx("button",{type:"button",onClick:()=>F(e),className:"rounded-full border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 hover:bg-slate-100",disabled:!1,children:"Show result"})]}),t?(0,i.jsxs)("div",{className:"grid gap-3",children:[i.jsx("div",{className:"rounded-xl bg-slate-50 p-3",children:u("Min–Max result",t.minmax,b)}),i.jsx("div",{className:"rounded-xl bg-lagoon-50/70 p-3",children:u("Weighted (Tetra) result",t.tetra,b)})]}):i.jsx("p",{className:"text-sm text-slate-600",children:"Select “Show result” to display the stored optimisation for this stakeholder."})]},e)})})]})]})}},99893:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});let i=(0,s(68570).createProxy)(String.raw`/Users/jasperderuiter/Documents/GitHub/Mose2/app/opt/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[66,576,672],()=>s(42946));module.exports=i})();